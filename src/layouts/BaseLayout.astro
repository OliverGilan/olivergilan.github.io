---
const siteTitle = "Oliver Gilan";
const siteDescription = "Dreams are the language of God.";

const {
  title = siteTitle,
  description = siteDescription,
  image = "/favicon.png",
} = Astro.props;

const canonicalURL = new URL(Astro.url.pathname, Astro.site);
const pageTitle = title === siteTitle ? title : `${title} | ${siteTitle}`;
const imageURL = new URL(image, Astro.site);

const navLinks = [
  { name: "About", url: '/'},
  { name: "Writing", url: "/writing/" },
  { name: "Reading List", url: "/reading/" },
];

const socialLinks = [
  { name: "Email", url: "mailto:blog@olivergilan.com", icon: "/icons/email.svg" },
  { name: "GitHub", url: "https://github.com/olivergilan", icon: "/icons/github.svg" },
  // { name: "LinkedIn", url: "https://linkedin.com/in/oliver-gilan/", icon: "/icons/linkedin.svg" },
  { name: "Twitter", url: "https://twitter.com/olvrgln", icon: "/icons/twitter.svg" },
  { name: "RSS", url: "/rss.xml", icon: "/icons/rss.svg" },
];
---

<!doctype html>
<html lang="en-us">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content={Astro.generator} />

    <!-- Favicon -->
    <link rel="shortcut icon" type="image/png" href="/favicon.png" />
    <link rel="icon" type="image/png" href="/favicon.png" />
    <link rel="apple-touch-icon" sizes="192x192" href="/favicon.png" />

    <!-- Canonical -->
    <link rel="canonical" href={canonicalURL} />

    <!-- Primary Meta Tags -->
    <title>{pageTitle}</title>
    <meta name="title" content={pageTitle} />
    <meta name="description" content={description} />
    <meta name="author" content="Oliver Gilan" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonicalURL} />
    <meta property="og:title" content={pageTitle} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={imageURL} />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@olvrgln" />
    <meta name="twitter:title" content={pageTitle} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={imageURL} />

    <!-- iOS Metadata -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="apple-mobile-web-app-title" content={pageTitle} />

    <!-- RSS Feed -->
    <link
      rel="alternate"
      type="application/rss+xml"
      title={siteTitle}
      href={new URL("rss.xml", Astro.site)}
    />

    <!-- Plausible Analytics -->
    <script
      defer
      data-domain="olivergilan.com"
      src="https://plausible.io/js/script.js"></script>

    <slot name="head" />
  </head>
  <body class="w-screen min-h-screen max-w-2xl mx-auto text-zinc-800">
    <div class="flex flex-col min-h-screen px-4">
      <header class="py-8 flex flex-col gap-1">
        <nav class="flex flex-wrap items-baseline justify-between gap-4">
          <a href="/" class="text-3xl font-light no-underline hover:opacity-70 transition-opacity">
            {siteTitle}
          </a>
          <ul class="flex flex-wrap gap-4 list-none m-0 p-0">
            {
              navLinks.map((link) => {
                const isActive = Astro.url.pathname.startsWith(link.url);
                return (
                  <li class="relative">
                    {isActive && (
                      <span class="absolute -top-1 left-1/2 -translate-x-1/2 w-1 h-1 bg-zinc-800 rounded-full"></span>
                    )}
                    <a
                      href={link.url}
                      class="text-lg no-underline hover:opacity-70 transition-opacity"
                    >
                      {link.name}
                    </a>
                  </li>
                );
              })
            }
          </ul>
        </nav>
      </header>

      <main class="flex-1">
        <slot />
      </main>

      <footer class="mt-8 pt-4 border-t border-zinc-200">
        <div class="flex justify-center gap-4 mb-3">
          {
            socialLinks.map((link) => (
              <a
                href={link.url}
                target="_blank"
                rel="noopener noreferrer"
                class="opacity-30 hover:opacity-70 transition-opacity"
                aria-label={link.name}
              >
                <img src={link.icon} alt={link.name} class="w-5 h-5" />
              </a>
            ))
          }
        </div>
        <p class="text-xs text-zinc-400 text-center">&copy; {new Date().getFullYear()} Oliver Gilan</p>
      </footer>
    </div>
  </body>
</html>

<style is:global>
  @font-face {
    font-family: "PT Serif";
    src: url("/fonts/PT_Serif/PTSerif-Regular.woff2") format("woff2");
  }

  * {
    font-family: "PT Serif", serif;
    font-size: 16px;
    font-feature-settings: normal;
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  a {
    color: inherit;
    /* text-decoration: underline; */
    /* text-decoration-color: rgba(20, 20, 20, 0.3); */
    /* text-underline-offset: 2px; */
  }

  a:hover {
    text-decoration-color: rgba(20, 20, 20, 0.8);
  }
</style>
