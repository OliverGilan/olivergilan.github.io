---
const siteTitle = "Oliver Gilan";
const siteDescription = "Personal blog and thoughts by Oliver Gilan";

const {
  title = siteTitle,
  description = siteDescription,
  image = "/favicon.png",
} = Astro.props;

const canonicalURL = new URL(Astro.url.pathname, Astro.site);
const pageTitle = title === siteTitle ? title : `${title} | ${siteTitle}`;
const imageURL = new URL(image, Astro.site);

const navLinks = [
  { name: "Blog", url: "/blog/" },
  { name: "Stream", url: "/stream/" },
  { name: "Blogroll", url: "/blogroll/" },
  { name: "Reading List", url: "/books/" },
];

const socialLinks = [
  { name: "GitHub", url: "https://github.com/olivergilan" },
  { name: "LinkedIn", url: "https://linkedin.com/in/oliver-gilan/" },
  { name: "Twitter", url: "https://twitter.com/olvrgln" },
];
---

<!doctype html>
<html lang="en-us">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content={Astro.generator} />

    <!-- Favicon -->
    <link rel="shortcut icon" type="image/png" href="/favicon.png" />
    <link rel="icon" type="image/png" href="/favicon.png" />
    <link rel="apple-touch-icon" sizes="192x192" href="/favicon.png" />

    <!-- Canonical -->
    <link rel="canonical" href={canonicalURL} />

    <!-- Primary Meta Tags -->
    <title>{pageTitle}</title>
    <meta name="title" content={pageTitle} />
    <meta name="description" content={description} />
    <meta name="author" content="Oliver Gilan" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonicalURL} />
    <meta property="og:title" content={pageTitle} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={imageURL} />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@olvrgln" />
    <meta name="twitter:title" content={pageTitle} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={imageURL} />

    <!-- iOS Metadata -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="apple-mobile-web-app-title" content={pageTitle} />

    <!-- RSS Feed -->
    <link
      rel="alternate"
      type="application/rss+xml"
      title={siteTitle}
      href={new URL("rss.xml", Astro.site)}
    />

    <!-- Plausible Analytics -->
    <script
      defer
      data-domain="olivergilan.com"
      src="https://plausible.io/js/script.js"></script>

    <slot name="head" />
  </head>
  <body class="w-screen min-h-screen max-w-3xl mx-auto text-zinc-800">
    <div class="flex flex-col min-h-screen px-4">
      <header class="py-8 flex flex-col gap-1">
        <nav class="flex flex-wrap items-baseline justify-between gap-4">
          <a href="/" class="text-3xl font-light no-underline hover:opacity-70 transition-opacity">
            {siteTitle}
          </a>
          <ul class="flex flex-wrap gap-4 list-none m-0 p-0">
            {
              navLinks.map((link) => (
                <li>
                  <a
                    href={link.url}
                    class="text-lg hover:opacity-70 transition-opacity"
                  >
                    {link.name}
                  </a>
                </li>
              ))
            }
            <li>
              <a
                href="/rss.xml"
                target="_blank"
                rel="noopener noreferrer"
                class="text-lg hover:opacity-70 transition-opacity"
              >
                RSS
              </a>
            </li>
          </ul>
        </nav>
      </header>

      <main class="flex-1">
        <slot />
      </main>

      <footer class="mt-8 pt-4 border-t border-zinc-200 text-center">
        <p class="text-xs text-zinc-400">&copy; 2024 Oliver Gilan. All rights reserved.</p>
      </footer>
    </div>
  </body>
</html>

<style is:global>
  @font-face {
    font-family: "Inter";
    src: url("/fonts/Inter.ttf") format("truetype");
  }

  * {
    font-family: "Inter", system-ui, sans-serif;
  }

  a {
    color: inherit;
    text-decoration: underline;
    text-decoration-color: rgba(20, 20, 20, 0.3);
    text-underline-offset: 2px;
  }

  a:hover {
    text-decoration-color: rgba(20, 20, 20, 0.8);
  }
</style>
