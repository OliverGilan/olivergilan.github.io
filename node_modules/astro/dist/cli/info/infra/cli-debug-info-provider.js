function withVersion(name, version) {
  let result = name;
  if (version) {
    result += ` (${version})`;
  }
  return result;
}
function createCliDebugInfoProvider({
  config,
  astroVersionProvider,
  packageManager,
  operatingSystemProvider,
  nodeVersionProvider
}) {
  return {
    async get() {
      const debugInfo = [
        ["Astro", `v${astroVersionProvider.version}`],
        ["Node", nodeVersionProvider.get()],
        ["System", operatingSystemProvider.displayName],
        ["Package Manager", packageManager.getName()],
        ["Output", config.output]
      ];
      const viteVersion = await packageManager.getPackageVersion("vite");
      if (viteVersion) {
        debugInfo.splice(1, 0, ["Vite", viteVersion]);
      }
      debugInfo.push([
        "Adapter",
        config.adapter ? withVersion(
          config.adapter.name,
          await packageManager.getPackageVersion(config.adapter.name)
        ) : "none"
      ]);
      const integrations = await Promise.all(
        config.integrations.map(
          async ({ name }) => withVersion(name, await packageManager.getPackageVersion(name))
        )
      );
      debugInfo.push(["Integrations", integrations.length > 0 ? integrations : "none"]);
      return debugInfo;
    }
  };
}
export {
  createCliDebugInfoProvider
};
